# 3つのモデリング視点

各モデリング視点の詳細な定義とガイダンスを提供する。

## 目次

- 概念モデル
- 仕様モデル
- 実装モデル
- 系統的な対応関係
- 適切な視点の選択

---

## 概念モデル

### 定義

概念モデルは、現実世界の関心事—業務、工場プロセス、組織構造—を記述する。モデルのどの部分がソフトウェアで実装またはサポートされるかについては何も言及しない。

### 特徴

- **解釈**: 世界についての事実の記述
- **スコープ**: ソフトウェアとは独立した現実世界のドメイン
- **抽象度**: 最高；すべての技術的制約を無視
- **動的機能**: コードでは不可能な機能も含む（例：動的サブタイピング）

### 捉えるもの

- ビジネス概念とその関係
- ドメインルールと不変条件
- 現実世界のプロセスとワークフロー
- 問題ドメインに存在する情報

### 除外するもの

- ソフトウェアのクラスやコンポーネント
- データベーススキーマ
- 実装上の制約
- 技術的アーキテクチャの決定

### よくある間違い

1. **実装のヒントを含める**: 外部キー、ID、技術的属性を追加しない
2. **振る舞いを過度に詳細化**: 「何である」かに留め、「ソフトウェアが何をすべきか」には踏み込まない
3. **プログラミング構造を使う**: オブジェクト指向のメッセージングモデルを仮定しない

### ステレオタイプ

概念要素には以下のステレオタイプを使用:

- `<<concept>>` - ドメイン概念
- `<<domain>>` - ドメイン要素
- `<<entity>>` - ビジネスエンティティ
- `<<dynamic>>` - 動的な属性または関係

---

## 仕様モデル

### 定義

仕様モデルは、ソフトウェアシステムが何をすべきか、どんな情報を保持すべきか、どんな振る舞いを示すべきかを定義する。技術的制約のない理想的なコンピューティングプラットフォームを仮定する。

### 特徴

- **解釈**: ソフトウェアの振る舞いに対する制約
- **スコープ**: ソフトウェア境界と外部との相互作用
- **抽象度**: 中程度；プラットフォーム非依存
- **焦点**: 「何を」であり「どのように」ではない

### 捉えるもの

- 必要なシステムの振る舞い
- システムが管理すべき情報
- 外部インターフェースと契約
- 品質属性と制約

### 除外するもの

- 実装戦略
- 内部コンポーネント構造
- パフォーマンス最適化
- プラットフォーム固有の決定

### よくある間違い

1. **早すぎる実装決定**: デザインパターンの選択を避ける
2. **内部構造の露出**: 外部の振る舞いに焦点を当てる
3. **API文書との混同**: 仕様はAPIより抽象的

### ステレオタイプ

仕様要素には以下のステレオタイプを使用:

- `<<type>>` - 抽象型仕様
- `<<interface>>` - 振る舞いの契約
- `<<service>>` - サービス仕様
- `<<constraint>>` - 振る舞いの制約

---

## 実装モデル

### 定義

実装モデルは、コンピューティング環境のすべての制約と制限を考慮して、ソフトウェアがどのように実装されているかを記述する。実際のコード構造と振る舞いを説明する。

### 特徴

- **解釈**: 実際の振る舞いの記述
- **スコープ**: ソフトウェア内部
- **抽象度**: 最低；すべての技術的詳細を含む
- **焦点**: ソフトウェアがどう構築されているか

### 捉えるもの

- クラス構造と階層
- デザインパターンの適用
- コンポーネント間の相互作用
- 技術的決定とトレードオフ

### 除外するもの

- 現実世界を直接表現していると主張しない
- 明確なマッピングなしにビジネスドメイン用語と混在させない

### よくある間違い

1. **ドメインとの直接対応を主張**: 現代のレイヤードアーキテクチャでは同じ概念が複数の表現を持つ
2. **環境制約の無視**: 実装は現実を反映すべき
3. **設計決定の省略**: 「何を」だけでなく「なぜ」も文書化

### ステレオタイプ

実装要素には以下のステレオタイプを使用:

- `<<class>>` - 実装クラス
- `<<component>>` - ソフトウェアコンポーネント
- `<<strategy>>` - Strategyパターン実装
- `<<repository>>` - データアクセス実装

---

## 系統的な対応関係

3つの視点は系統的な対応関係で結びつく:

```
概念 ◄──────────────────► 仕様 ◄──────────────────► 実装
     「必要性を表現」         「実現される」
```

### 対応関係のガイドライン

**概念 → 仕様**

1つの概念要素は以下にマッピングされる可能性がある:
- ゼロの仕様要素（自動化されない）
- 1つの仕様要素（直接サポート）
- 複数の仕様要素（機能が分散）

**仕様 → 実装**

1つの仕様要素は以下にマッピングされる可能性がある:
- 複数の実装クラス（レイヤードアーキテクチャ）
- 部分的な実装クラス（共有ユーティリティ）
- 実装パターン（例：Strategy、Repository）

### 例：顧客の概念

```
概念レベル:
  <<concept>> Customer
  - name
  - creditLimit
  - <<dynamic>> preferredStatus

仕様レベル:
  <<type>> Customer
  - getName(): String
  - getCreditLimit(): Money
  - isPreferred(): Boolean

実装レベル:
  <<class>> Customer          ──► <<class>> CustomerDTO
  <<class>> CustomerStrategy  ──► <<class>> PreferredCustomer
  <<class>> CustomerRepository
```

---

## 適切な視点の選択

### 選択ガイド

| 状況 | 使用する視点 |
|------|-------------|
| 問題ドメインの探索 | 概念 |
| 要件収集 | 概念 → 仕様 |
| システム振る舞いの定義 | 仕様 |
| API設計 | 仕様 |
| 内部構造の設計 | 実装 |
| 既存コードの文書化 | 実装 |
| ドメインエキスパートへの説明 | 概念 |
| 開発者への説明 | 実装 |

### 視点間の移行

視点間を移行する際は、以下を明示的に文書化:

1. **追加されるもの**: ターゲット視点固有の新要素
2. **詳細化されるもの**: より詳細になる要素
3. **変換されるもの**: 表現が変わる要素
4. **除外されるもの**: ターゲット視点に関係ない要素

### 警告サイン

視点の混乱を示す警告サイン:

- 概念モデルにデータベースキーがある
- 実装モデルにビジネスルールがある
- 仕様モデルに実装クラスがある
- 概念モデルで「顧客オブジェクトがメッセージを送る...」
- 仕様モデルにデザインパターンがある
